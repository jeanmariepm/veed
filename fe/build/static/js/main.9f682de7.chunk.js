(this.webpackJsonpfe=this.webpackJsonpfe||[]).push([[0],{116:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(22),s=n.n(i),o=(n(82),n(83),n(84),n(123)),c=n(9),l=n(37),u=n(14),h=n(25),d=n(126),g=n(127),p=n(124),b=n(11),j=n(12),f=n(18),v=n(17),O=n(75),m=n(1),x=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var r;return Object(b.a)(this,n),(r=t.call(this,e)).startOver=function(){r.setState((function(e){return{score:0}}))},r.inputKeyPress=function(e){"Enter"===e.key&&(parseInt(r.state.response)===r.state.num1+r.state.num2?r.setState((function(e){return{score:e.score+1,response:"",num1:Math.ceil(10*Math.random()),num2:Math.ceil(10*Math.random()),incorrect:!1}})):r.setState((function(e){return{score:e.score-1,incorrect:!0,response:""}})))},r.updateResponse=function(e){r.setState({response:e.target.value})},r.state={num1:1,num2:1,response:"",score:0,incorrect:!1,imageURL:"https://picsum.photos/100"},r}return Object(j.a)(n,[{key:"render",value:function(){return 2===this.state.score?this.renderWinnerScreen():this.renderProblem()}},{key:"renderWinnerScreen",value:function(){return Object(m.jsxs)("div",{className:"app",children:[Object(m.jsx)("img",{src:this.state.imageURL,alt:""}),Object(m.jsx)("div",{id:"winner",children:"You won!"}),Object(m.jsx)(O.a,{onClick:this.startOver,children:"Start Over"})]})}},{key:"renderProblem",value:function(){return Object(m.jsxs)("div",{className:"app",children:[Object(m.jsx)("h1",{children:"Addition"}),Object(m.jsxs)("div",{className:this.state.incorrect?"incorrect":"",id:"problem",children:[this.state.num1," + ",this.state.num2]}),Object(m.jsx)("input",{onKeyPress:this.inputKeyPress,onChange:this.updateResponse,autoFocus:!0,value:this.state.response}),Object(m.jsxs)("div",{children:["Score: ",this.state.score]})]})}}]),n}(r.Component),A=n(26),S=n.n(A),P=n(38),L=n(63),y=n(33),C=n.n(y);C.a.interceptors.response.use(null,(function(e){return e.response&&e.response.status>=400&&e.response.status<500||(console.error(e),l.b.error("An unexpected error occurrred.")),Promise.reject(e)}));var T={get:C.a.get,post:C.a.post,put:C.a.put,delete:C.a.delete,apiUrl:function(){return"localhost"===window.location.hostname?"http://localhost:8000":window.location.origin}},k="token",D=null;function H(){return(H=Object(P.a)(S.a.mark((function e(t){var n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.post(T.apiUrl()+"/refresh_token/",{token:t},{headers:{Authorization:"JWT "+t}});case 3:n=e.sent,(r=n.data).token?(D=r.username,localStorage.setItem(k,r.token)):console.log("Need to login again"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),e.t0.response.status>400&&(console.error(e.t0.response),console.log("Need to login again"));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var R={login:function(){var e=Object(P.a)(S.a.mark((function e(t,n,r){var a,i,s;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=T.apiUrl()+"/login/",e.prev=1,e.next=4,T.post(a,{username:t,password:n});case 4:i=e.sent,s=i.data,localStorage.setItem(k,s.token),D=t,r(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log("Login failure!",e.t0),Object(l.b)("Login failed. Please try again");case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n,r){return e.apply(this,arguments)}}(),signup:function(){var e=Object(P.a)(S.a.mark((function e(t,n,r){var a,i,s;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=T.apiUrl()+"/signup/",e.prev=1,e.next=4,C.a.post(a,{username:t,password:n});case 4:i=e.sent,s=i.data,localStorage.setItem(k,s.token),D=t,r(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log("Signup failure!",e.t0),Object(l.b)("Signup failed. Please try again");case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n,r){return e.apply(this,arguments)}}(),logout:function(e){localStorage.removeItem(k),D=null,e()},getCurrentUser:function(){if(D)return D;try{var e=localStorage.getItem(k);if(!e)return null;var t=Object(L.a)(e).exp;return t<144e5?function(e){H.apply(this,arguments)}(e):D=Object(L.a)(e).username,D}catch(n){return console.log("Nothing in jwt"),null}},getJwt:function(){return localStorage.getItem(k)}},N=function(){var e=R.getCurrentUser();return Object(m.jsxs)(a.a.Fragment,{children:[e?Object(m.jsxs)("h2",{children:["Welcome back, ",e]}):Object(m.jsxs)(a.a.Fragment,{children:[Object(m.jsx)("h2",{children:"Hello, Guest!"}),Object(m.jsxs)("div",{className:"alert alert-dark",role:"alert",children:["To fully explore the site, register. ",Object(m.jsx)("br",{}),"If you have already registered, please login"]}),Object(m.jsxs)("div",{className:"alert alert-dark",role:"alert",children:["This is not a secure site. ",Object(m.jsx)("br",{}),"Do NOT provide any sensitive or confidential data"]})]}),Object(m.jsx)("div",{className:"alert alert-dark",role:"alert",children:"If you have just been introduced to the game of Bridge, you can practice bidding and get feedback from an AI"}),Object(m.jsxs)("div",{className:"alert alert-dark",role:"alert",children:["This site is built with Django and React. ",Object(m.jsx)("br",{}),"It is the developer's playground for experimentation. ",Object(m.jsx)("br",{}),"You are welcome to access",Object(m.jsx)("a",{href:"https://github.com/jeanmariepm/veed.git",children:" the source code"})]})]})},w=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var r;return Object(b.a)(this,n),(r=t.call(this,e)).styles={backgroundColor:"blue",fontSize:14,width:50,height:50,margin:2,borderRadius:4},r.state={game:e.game,handler:e.onClick,index:e.index},r}return Object(j.a)(n,[{key:"getDisabled",value:function(){return null!==this.getValue()}},{key:"getValue",value:function(){return this.state.game.squares[this.state.index]}},{key:"render",value:function(){var e=this;return Object(m.jsx)(O.a,{style:this.styles,disabled:this.getDisabled(),onClick:function(){return e.state.handler()},children:Object(m.jsx)("strong",{children:this.getValue()})})}}]),n}(r.Component),B=n(16),X=function(){function e(){Object(b.a)(this,e),this.bestVal={X:1,O:-1},this.squares=Array(9).fill(null)}return Object(j.a)(e,[{key:"getWinner",value:function(){return this.calculateWinner(this.squares)}},{key:"isOver",value:function(){return 0===this.squares.filter((function(e){return null===e})).length}},{key:"calculateWinner",value:function(e){for(var t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],n=0;n<t.length;n++){var r=Object(u.a)(t[n],3),a=r[0],i=r[1],s=r[2];if(null!==e[a]&&e[a]===e[i]&&e[a]===e[s])return e[a]}return null}},{key:"setAction",value:function(e,t){this.squares[t]=e}},{key:"getAIAction",value:function(){if(1===this.squares.filter((function(e){return"X"===e})).length){if(!this.squares[4])return 4;if(!this.squares[0])return 0}var e=this.minmax(this.squares,"O"),t=Object(u.a)(e,2)[1];return-1===t&&(console.log("giving up?"),t=this.squares.findIndex((function(e){return null===e}))),t}},{key:"getWinningMove",value:function(e,t){for(var n=Object(B.a)(e),r=0;r<e.length;r++)if(!e[r]){n[r]=t;var a=this.calculateWinner(n);if(n[r]=e[r],a===t)return[this.bestVal[t],r]}return[null,null]}},{key:"minmax",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r="X"===t?"O":"X",a=!0,i=0;i<e.length;i++)e[i]||(a=!1);if(a)return[0,-1];var s=this.getWinningMove(e,t),o=Object(u.a)(s,2),c=o[0],l=o[1];if(c===this.bestVal[t])return[c,l];for(var h=Object(B.a)(e),d=[this.bestVal[r],-1],g=d[0],p=d[1],b=0;b<e.length;b++)if(!e[b]){h[b]=t,n<0&&console.log("".concat("*".repeat(n)," minmax considering ").concat(b," for ").concat(t));var j=this.minmax(h,r,n+1),f=Object(u.a)(j,2);if(c=f[0],l=f[1],n<0&&console.log("".concat("*".repeat(n)," minmax considered ").concat(b," for ").concat(t," and got ").concat(c,",").concat(l)),h[b]=e[b],c===this.bestVal[t])return[c,b];0===c&&(g=c,p=b)}return[g,p]}}]),e}(),U=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var r;return Object(b.a)(this,n),(r=t.call(this,e)).startOver=function(){r.setState({game:new X})},r.state={game:new X},r}return Object(j.a)(n,[{key:"renderSquare",value:function(e){var t=this;return Object(m.jsx)(w,{game:this.state.game,index:e,onClick:function(){return t.clickHandler(e)}})}},{key:"clickHandler",value:function(e){if(this.state.game.setAction("X",e),this.state.game.getWinner())console.log("Disabling clickHandler as we have a winners ");else{var t=this.state.game.getAIAction();console.log("AI recommends: ".concat(t)),this.state.game.setAction("O",t)}this.setState({game:this.state.game})}},{key:"renderWinnerScreen",value:function(e){return Object(m.jsxs)("div",{className:"app",children:[Object(m.jsxs)("div",{id:"winner",children:[e," won!"]}),Object(m.jsx)(O.a,{onClick:this.startOver,children:"Start Over"})]})}},{key:"render",value:function(){var e;return this.state.game.isOver()?e="Nobody":this.state.game.getWinner()&&(e=this.state.game.getWinner()),e?this.renderWinnerScreen(e):this.renderGameScreen()}},{key:"renderGameScreen",value:function(){return Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)("div",{children:Object(m.jsx)("h1",{children:"Tic Tac Toe"})}),Object(m.jsxs)("div",{className:"BoardSquare",children:[Object(m.jsxs)("div",{className:"board-row",children:[this.renderSquare(0),this.renderSquare(1),this.renderSquare(2)]}),Object(m.jsxs)("div",{className:"board-row",children:[this.renderSquare(3),this.renderSquare(4),this.renderSquare(5)]}),Object(m.jsxs)("div",{className:"board-row",children:[this.renderSquare(6),this.renderSquare(7),this.renderSquare(8)]})]})]})}}]),n}(r.Component),I=function(){function e(){Object(b.a)(this,e),this.hands=this.shuffle(),this.dealer=3,this.vul=Math.floor(4*Math.random())}return Object(j.a)(e,[{key:"setHands",value:function(e){this.hands=e}},{key:"shuffle",value:function(){for(var e,t=[],n=0;n<52;n++)t[n]=n;for(var r=[],a=0;a<4;a++){for(var i={S:[],H:[],D:[],C:[]},s=0;s<13;s++)e=t[Math.floor(Math.random()*t.length)],t.splice(t.indexOf(e),1),e<13?i.S.push(e):e<26?i.H.push(e):e<39?i.D.push(e):e<52&&i.C.push(e);r.push(i)}return this.getBridgeDeal(r)}},{key:"getBridgeDeal",value:function(e){for(var t=this,n=[],r=function(r){n[r]={S:[],H:[],D:[],C:[]},["S","H","D","C"].map((function(a){n[r][a]=e[r][a].sort((function(e,t){return t-e}));for(var i="",s=0;s<n[r][a].length;s++)i+=t.getBridgeChar(n[r][a][s]);return n[r][a]=i,n[r]}))},a=0;a<4;a++)r(a);return n}},{key:"getBridgeChar",value:function(e){return{0:"2",1:"3",2:"4",3:"5",4:"6",5:"7",6:"8",7:"9",8:"T",9:"J",10:"Q",11:"K",12:"A"}[e%13]}},{key:"getHand",value:function(e){return this.hands[e]}},{key:"getDealer",value:function(){return this.dealer}}]),e}(),F={S:"data:image/gif;base64,R0lGODlhDQALALMAAAAAAL8AAAC/AL+/AAAAv78AvwC/v8DAwICAgP8AAAD/AP//AAAA//8A/wD//////yH5BAEAAAcALAAAAAANAAsAAAQc8MgJprUgX5z17uAFjtRIHuaZhpJXoa/ofeYUAQA7",H:"data:image/gif;base64,R0lGODlhDQALALMAAAAAAL8AAAC/AL+/AAAAv78AvwC/v8DAwICAgP8AAAD/AP//AAAA//8A/wD//////yH5BAEAAAcALAAAAAANAAsAAAQd8JxE5ayS6ru5/kkGguLYeaRlYupovenbhrJMvxEAOw==",D:"data:image/gif;base64,R0lGODlhDQALALMAAAAAAL8AAAC/AL+/AAAAv78AvwC/v8DAwICAgP8AAAD/AP//AAAA//8A/wD//////yH5BAEAAAcALAAAAAANAAsAAAQa8MiZprUpX5z17uAFjtRISmYnmttxtmpLbREAOw==",C:"data:image/gif;base64,R0lGODlhDQALALMAAAAAAL8AAAC/AL+/AAAAv78AvwC/v8DAwICAgP8AAAD/AP//AAAA//8A/wD//////yH5BAEAAAcALAAAAAANAAsAAAQe8EgJ6ry0Wpw1nx63ARnokRp5pOx4riFMleJWs1MEADs="},M=function(e){var t=e.suit;return Object(m.jsx)(a.a.Fragment,{children:Object(m.jsx)("img",{src:F[t],alt:t})})},q=function(e){var t=e.cards,n=e.name;return Object(m.jsxs)(a.a.Fragment,{children:[Object(m.jsx)("h5",{children:n}),["S","H","D","C"].map((function(e){return Object(m.jsxs)("h6",{children:[Object(m.jsx)(M,{suit:e}),t&&t[e],"\xa0"]},e)}))]})},W=n(121),z=n(122),J=n(128),Q=n(8),E=n.n(Q),G={fontFamily:["Courier New","Courier","monospace"],textAlign:"center",fontWeight:"bolder",fontSize:"small",maxHeight:"fit-content",display:"inline-block",marginLeft:"2%",zoon:1},K=function(e,t,n,r){for(var i=0;i<e;i++)t=[""].concat(Object(B.a)(t));t=[].concat(Object(B.a)(t),[r?"-":n?"i":"?"]);var s={"":"-","1T":"1NT","2T":"2NT","3T":"3NT","4T":"4NT","5T":"5NT","6T":"6NT","7T":"7NT"};return n=s[n]||n,Object(m.jsx)(a.a.Fragment,{children:t.map((function(e,r){return Object(m.jsx)("div",{children:r%4===0&&Object(m.jsx)(W.a,{children:E.a.slice(t,r,r+4).map((function(e,t){return Object(m.jsx)(z.a,{style:{maxWidth:3},children:"i"===e?Object(m.jsx)("i",{className:"fa fa-info",title:n,"aria-hidden":"true"}):Object(m.jsx)("div",{style:G,children:s[e]||e})},t)}))},r)},r)}))})},V=function(e){var t=e.title,n=e.dealer,r=e.bids,a=e.aiBid,i=e.biddingOver;return console.log(a),Object(m.jsx)(J.a,{children:Object(m.jsxs)(J.a.Body,{children:[Object(m.jsx)(W.a,{children:t}),Object(m.jsx)(W.a,{children:["W","N","E","S"].map((function(e,t){return Object(m.jsx)(z.a,{style:{maxWidth:3},children:Object(m.jsx)("div",{style:G,children:e})},t)}))}),K(n,r,a,i)]})})},Y=n(125),_=function(e){var t=e.onUndoBid;return Object(m.jsx)(O.a,{variant:"secondary",size:"sm",onClick:t,children:"Undo last bid"})},Z=function(e){var t=e.placeBid,n=e.undoBid,i=e.goingBid,s=e.allowUndo,c=e.doubleOption,l=e.aiBid,h=Object(r.useState)(""),d=Object(u.a)(h,2),g=d[0],p=d[1],b={fontFamily:["Courier New"],fontSize:"large"},j=function(e,n){var r=e.target.value;if(console.log("onPickBid",r,n),"Skip"!==r)return n&&(A[r]||r)!==n?void p(r):(console.log("Place bid:",r,n),t(A[r]||r),void p(""));p(r)},f=function(){t(A[g]||g),p("")},v=function(){p("")},x=function(){n(),p("")},A={Pass:"P","1NT":"1T","2NT":"2T","3NT":"3T","4NT":"4T","5NT":"5T","6NT":"6T","7NT":"7T",Dbl:"X",RDbl:"XX"},S={"":"-","1T":"1NT","2T":"2NT","3T":"3NT","4T":"4NT","5T":"5NT","6T":"6NT","7T":"7NT",X:"Dbl",XX:"RDbl"},P=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=["Pass"];c&&t.push(S[c]),t.push("Skip");var n=i?i.charAt(0)-"0":1;return Object(m.jsxs)(o.a,{style:b,children:[Object(m.jsx)(W.a,{children:t.map((function(e,t){return Object(m.jsxs)("div",{xs:3,children:[Object(m.jsx)(O.a,{onClick:function(e){return j(e,l)},className:"btn-sm m-0 p-0",variant:"Pass"===e?"success":"Skip"===e?"warning":"danger",value:e,children:e},e),"\xa0"]},t)}))}),[1,2,3,4,5,6,7].map((function(t){return Object(m.jsx)("div",{children:(e||t>=n&&t<=n+1)&&Object(m.jsx)(W.a,{children:["C","D","H","S","T"].map((function(e){return Object(m.jsxs)("div",{children:[t+e<=i?Object(m.jsx)(O.a,{disabled:!0,className:"btn-sm m-0 p-0",style:{height:12},variant:"link",value:t+e,children:S[t+e]||t+e}):Object(m.jsx)(O.a,{onClick:function(e){return j(e,l)},className:"btn-sm m-0 p-0",variant:"success",value:t+e,children:S[t+e]||t+e}),"\xa0"]},e)}))},t)},t)}))]})};return g?"Skip"===g?Object(m.jsxs)(Y.a.Dialog,{children:[Object(m.jsx)(Y.a.Header,{children:Object(m.jsx)(Y.a.Title,{children:"Make your bid"})}),Object(m.jsx)(Y.a.Body,{children:P(!0)}),Object(m.jsx)(Y.a.Footer,{children:Object(m.jsx)(O.a,{variant:"secondary",onClick:v,children:"Cancel"})})]}):Object(m.jsxs)(Y.a.Dialog,{children:[Object(m.jsx)(Y.a.Header,{children:Object(m.jsx)(Y.a.Title,{children:"Check your bid"})}),Object(m.jsxs)(Y.a.Body,{children:[Object(m.jsxs)(W.a,{children:["Your bid: ",g]}),Object(m.jsxs)(W.a,{children:[" AI says: ",S[l]||l]})]}),Object(m.jsxs)(Y.a.Footer,{children:[Object(m.jsx)(O.a,{variant:"secondary",onClick:v,children:"Retry"}),Object(m.jsx)(O.a,{variant:"primary",onClick:f,children:"Confirm Bid"})]})]}):Object(m.jsxs)(a.a.Fragment,{children:[Object(m.jsx)("div",{children:P()}),Object(m.jsx)("div",{children:Object(m.jsx)(a.a.Fragment,{children:s&&Object(m.jsx)(_,{onUndoBid:x})})})]})},$=n(57),ee={getOpening:function(e){return"U"===e.shape?"":E.a.inRange(e.totalPoints,15,18)?"1T":E.a.inRange(e.totalPoints,20,22)?"2T":""},getOvercall:function(e,t,n){var r,a=t.goingBid.charAt(0)-"0",i=Object($.a)(t.oppSuits);try{for(i.s();!(r=i.n()).done;){var s=r.value;if("T"===s)return"";if(!n.haveStopper(s))return""}}catch(o){i.e(o)}finally{i.f()}return"B"===n.shape&&n.totalPoints>=18?3===a?"3T":a<=2?"X":"":"B"===n.shape&&n.totalPoints>=15?1===a?"1T":2===a?"2T":"":""},getResponse:function(e,t,n){var r=e[e.length-1],a=t.goingBid,i=a.charAt(0)-"0",s=a.charAt(1);if(!["P","X","2C"].includes(r))return n.totalPoints>=10?n.longestLength>5&&r<"4S"?n.longestSuit>s?i+n.longestSuit:i+1+n.longestSuit:"X":"";if(5===n.spadeLength&&E.a.inRange(n.totalPoints,8,10)&&1===i)return"2C"===r?"X":"2C";if(n.spadeLength>=5&&n.heartLength<4)return i+1+"H";if(n.heartLength>=5&&n.spadeLength<4)return i+1+"D";if(n.spadeLength>=5&&n.heartLength>=5)return 1===i?n.totalPoints>=10?"2H":"2D":n.totalPoints>=4?"3H":"3D";if(n.spadeLength>=4&&n.heartLength>=4&&n.spadeLength+n.heartLength===9)return n.totalPoints>=10&&1===i?"2C":n.totalPoints>=4&&2===i?"3C":"S"===n.longestSuit?i+1+"H":i+1+"D";if(4===n.spadeLength||4===n.heartLength){if(1===i){if(n.totalPoints>=10&&n.spadeLength+n.heartLength!==7)return"2C"===r?"X":"2C";if(n.totalPoints>=8)return"2C"}if(2===i&&n.totalPoints>=4)return"3C"}if(1===i&&n.totalPoints>=10){if(1===n.spadeLength&&3===n.heartLength&&5===n.longestLength)return"3S";if(3===n.spadeLength&&1===n.heartLength&&5===n.longestLength)return"3H";if(n.spadeLength>=3||n.heartLength>=3)return"3C";if(5===n.clubLength&&5===n.diamondLength)return"3D"}if(1===i&&E.a.inRange(n.totalPoints,8,10))return"2S";if(1===i&&n.ltc<=9){if(n.clubLength>=6)return"2S";if(n.diamondLength>=6)return"2T"}var o=n.totalPoints;if(1===i){if(10<=o<=15)return"3T";if(16<=o<=17)return"4T";if(18<=o<=19)return"6T";if(20<=o<=21)return"2S";if(22<=o)return"7T"}else if(2===i){if(5<=o<=11)return"3T";if(12<=o)return"4T";if(13<=o<=15)return"6T";if(16<=o)return"3S";if(17<=o)return"7T"}return"P"},getOpenerRebid:function(e,t,n){var r=e[e.length-4],a=e[e.length-2],i=a.charAt(1),s=n.spadeLength,o=n.heartLength,c=n.diamondLength,l=n.clubLength,u=n.totalPoints>=16,h="";return"1T"===r?("2C"===a&&(h=o>=4?"2H":s>=4?"2S":"2D"),!h&&a<="2H"&&(h="D"===i?"2H":"2S"),"2S"===a&&(h=u?"3C":"2T"),"2T"===a&&(h=u&&c>=2?"3D":"3C"),"3C"===a&&(h=o>=5?"3H":s>=5?"3S":o>=4||s>=4?"3D":"3T"),"3D"===a&&(h=n.haveStopper("H")&&n.haveStopper("S")?"3T":o>=5?"3H":s>=5?"3S":c>l?"4D":"4C"),"3H"===a&&(h=s>=3?"3S":n.haveStopper("H")?"3T":c>l?"4D":"4C"),"3S"===a&&(h=s>=3?"4H":n.haveStopper("S")?"3T":c>l?"4D":"4C")):("3C"===a&&(h=o>=4?"3H":s>=4?"3S":"3D"),!h&&a<="3H"&&(h="D"===i?"3H":"3S"),"3S"===a&&((h=c<=l&&l>=4?"4C":"")||(h=c>=4?"4D":"3T"))),["3T","6T","7T"].includes(a)&&(h="P"),"4T"===a&&(h=u?"6T":"P"),h},getResponderRebid:function(e,t,n){for(var r=e.length-1;r>=e.length-4;r-=2)if("P"!==e[r])return"";var a=n.spadeLength,i=n.heartLength,s=(n.diamondLength,n.clubLength,e[e.length-2]),o=s.charAt(0)-"0",c=s.charAt(1),l=e[e.length-4].charAt(1);if(["3T","4H","4S","5C","5D"].includes(s))return"P";if(o>=6)return"P";if("C"===l){if(2===o&&n.totalPoints<8)return"P";if(3===o&&n.totalPoints<4)return"P";if(2===o&&n.totalPoints>=10||3===o&&n.totalPoints>=4){if("D"===c&&a+i===9)return 5===a?"3H":"3S";if("H"===c)return i>=4?"4H":"3T";if("S"===c)return a>=4?"4S":"3T"}if(2===o&&n.totalPoints>=8){if("D"===c)return 5===a?"2S":"2T";if("H"===c)return i>=4?"3H":5===a?"2S":"2T";if("S"===c)return a>=4?"3S":"2T"}}return["D","H"].includes(l)?2===o&&n.totalPoints>=10||3===o&&n.totalPoints>=4?"H"===c&&i>5?"4H":"S"===c&&a>5?"4S":"3T":2===o&&n.totalPoints>=8?"H"===c&&i>5?"3H":"S"===c&&a>5?"3S":"2T":"P":""}},te={getOpening:function(e){return E.a.inRange(e.totalPoints,12,22)?4===e.diamondLength&&5===e.clubLength&&e.totalPoints<=15||e.diamondLength>=4&&e.diamondLength>=e.clubLength?"1D":"1C":""},getOvercall:function(e,t,n){},getResponse:function(e,t,n){var r=e[e.length-1],a=r.match(/^\d/),i=a?r.charAt(1):null,s=e[e.length-2],o=s.charAt(0)-"0",c=s.charAt(1),l=n.longestSuit,u=n.longestLength,h=n.spadeLength,d=n.heartLength,g=n.diamondLength,p=n.clubLength,b=i?a:o,j="C"===c&&p>=5||"D"===c&&g>=4||"H"===c&&d>=3||"S"===c&&h>=3,f=[],v=null;if(t.oppSuits.has("H")||d>=4&&f.push("H"),t.oppSuits.has("S")||h>=4&&f.push("S"),2===f.length?v=h>d||h===d&&h>4?"S":"H":1===f.length&&(v=f[0]),n.totalPoints<6)return"P";if(v){if("P"===r&&1===b)return b+v;if(i&&(1===b&&n.totalPoints>=8||2===b&&n.totalPoints>=10||3===b&&n.totalPoints>=12)){if("S"===v&&h>=5)return b+v;if("H"===v&&d>=5)return b+v;if(2===f.length&&4===h)return"X";if(1===b&&"H"===v&&4===d&&"H"<i)return"1H";if(1===b&&"H"===i&&"S"===v&&4===d)return"X"}}var O,m=!0,x=Object($.a)(t.oppSuits);try{for(x.s();!(O=x.n()).done;){var A=O.value;"T"===!A&&(n.haveStopper(A)||(m=!1))}}catch(S){x.e(S)}finally{x.f()}if("P"===r&&1===b&&n.totalPoints<=10)return m&&"B"===n.shape&&n.totalPoints>=8?"1T":"D"===l&&"D"!==c?"1D":j?"3"+c:"1T";if("P"===r&&b<=2&&n.totalPoints>=11){if(m&&"B"===n.shape)return"2T";if(j&&1===b)return"2"+c;if(u>=5)return 1===b?"1"+l:"2"+l}return"X"===r&&n.totalPoints>=11?"XX":void 0},getOpenerRebid:function(e,t,n){return""},getResponderRebid:function(e,t,n){for(var r=e.length-1;r>=e.length-4;r-=2)if("P"!==e[r])return"";n.spadeLength,n.heartLength,n.diamondLength,n.clubLength;var a=e[e.length-2],i=a.charAt(0)-"0";a.charAt(1),e[e.length-4].charAt(1),e[e.length-6].charAt(1);return["3T","4H","4S","5C","5D"].includes(a)||i>=6?"P":""}},ne={getOpening:function(e){return e.spadeLength<5&&e.heartLength<5?"":E.a.inRange(e.totalPoints,12,22)?e.spadeLength>=e.heartLength?"1S":"1H":""},getOvercall:function(e,t,n){var r=t.goingBid,a=t.oppSuits,i=r.charAt(0)-"0",s=r.charAt(1);return n.totalPoints<8+3*(i-1)?"":!a.has(n.longestSuit)&&n.goodToOvercall(n.longestSuit)?n.totalPoints>=17?"X":i+n.longestSuit>i+s?i+n.longestSuit:i+1+n.longestSuit:!a.has(n.secondSuit)&&n.goodToOvercall(n.secondSuit)?n.totalPoints>=17?"X":i+n.secondSuit>i+s?i+n.secondSuit:i+1+n.secondSuit:""},getResponse:function(e,t,n){var r=e[e.length-1],a=r.match(/^\d/),i=a?r.charAt(1):null,s=t.pdRole,o=e[e.length-2],c=o.charAt(0)-"0",l=o.charAt(1),u=n.longestSuit,h=n.longestLength,d=n.spadeLength,g=n.heartLength,p=n.diamondLength,b=n.clubLength,j=i?a:c,f=i||l,v="",O="C"===l&&b>=5||"D"===l&&p>=4||"H"===l&&g>=3||"S"===l&&d>=3;if(n.totalPoints<5)return"P";if(O){if("Opener"===s)return n.ltc<=9&&(v=n.ltc<=7?"4"+l:11-n.ltc+l),10===n.ltc&&(n.totalPoints<8?v="1T":n.totalPoints<11&&(v="2"+l)),v>j+f?v:i?"X":"P";if(n.ltc<=8)return(v=n.ltc<=6?"4"+l:10-n.ltc+l)>j+f?v:i?"X":"P"}else if("Opener"===s&&n.totalPoints>=12||"Overcaller"===s&&n.totalPoints>=15){if(h>=5&&(!i||a<=2))return u>f?j+u:j+1+u;if("X"===r)return"XX";if(u<5&&!i)return j+1+"C";if(i&&a<=3)return n.haveStopper(i)?j+"T":"X"}else{if(!(n.totalPoints>=6))return"P";if(v="",h>=5){if(u>f&&(v=j+u),u<f&&(v=j+1+u),v<"1T")return v;if(v<"2T"&&n.totalPoints>=10&&u<l&&i)return v;if(v&&n.totalPoints>=8&&i)return"X"}if(1===j){if(d>=4)return"1S">j+f?"1S":"P";if("P"===r||n.totalPoints>=8)return"1T">j+f?"1T":"P"}}},getOpenerRebid:function(e,t,n){var r=e[e.length-1],a=e[e.length-4].charAt(1),i=e[e.length-2],s=i.charAt(0)-"0",o=i.charAt(1),c=n.secondSuit,l=n.secondLength,u=n.spadeLength,h=n.heartLength,d=(n.diamondLength,n.clubLength),g="";if("P"!==r)return g;if(2===s&&o<a)return"2H"===i&&h>=3?"3H":(g="H"===a&&h>=6?"2H":"S"===a&&u>=6?"2S":"")||(l>=4?"2"+c>i?"2"+c:"3"+c:"2T");if(["1T","1S"].includes(i)){if("S"===o){if(u>=4){var p=8-n.ltc;return(p=p>4?4:p<2?2:p)+"S"}if("B"===n.shape&&n.totalPoints<=17)return"1T"}return"B"===n.shape&&n.totalPoints<=13?"P":(g="H"===a&&h>=6?"2H":"S"===a&&u>=6?"2S":"")?n.totalPoints<=17?g:"3"+a:l>=4&&c<a?n.totalPoints<=17?"2"+c:"3"+c:l>=4&&"S"===c&&n.totalPoints>=17?"2S":d>=2?"2C":"2D"}return g},getResponderRebid:function(e,t,n){for(var r=e.length-1;r>=e.length-4;r-=2)if("P"!==e[r])return"";var a=n.spadeLength,i=n.heartLength,s=n.diamondLength,o=n.clubLength,c=n.longestSuit,l=n.longestLength,u=e[e.length-2],h=u.charAt(0)-"0",d=u.charAt(1),g=e[e.length-4],p=g.charAt(1),b=g.charAt(0)-"0",j=e[e.length-6],f=j.charAt(1),v=j.charAt(0)-"0";if(["3T","4H","4S","5C","5D"].includes(u))return"P";if(h>=6)return"P";if(2===b&&p<f){if(f===d){if("S"===d&&a>=2)return"3S";if("H"===d&&i>=2)return"3H";if("D"===d)return n.haveStopper("H")?n.haveStopper("S")?"2T":"2H":n.haveStopper("S")?"2S":s>=2?"3D":"3C"}return"2T"===u?"S"===f&&a>=3?"3S":"H"===f&&i>=3?"3H":n.secondLength>=5?"3"+n.secondSuit:"U"!==n.shape&&n.totalPoints<=12?"3T":n.longestLength>=6||n.longestSuit!==p?"3"+n.longestSuit:"3"+n.secondSuit:("S"===d&&a>=4&&(O="S"),"H"===d&&i>=4&&(O="H"),!O&&"S"===f&&a>=3&&(O="S"),!O&&"H"===f&&i>=3&&(O="H"),O||n.longestSuit===p||(O=n.longestSuit),!O&&n.secondLength>=4&&(O=n.secondSuit),O||(O="T"),O>d?h+O:h+1+O);var O}if(1===b&&p>f){var m=!1;if(f===d?("S"===d&&a>=2&&(m=!0),"H"===d&&i>=2&&(m=!0),"D"===d&&s>=2&&!0,"C"===d&&o>=2&&!0):"T"!==d&&("S"===d&&a>=4&&(m=!0),"H"===d&&i>=4&&(m=!0),"D"===d&&s>=4&&!0,"C"===d&&o>=4&&!0),m){var x=0;return n.ltc<=9&&(x=n.ltc<=7?4:11-n.ltc),10===n.ltc&&(x=2),(x=(x=x+h-1)>4?4:x)>h?x+d:"P"}if(u<"2"+f){if(n.totalPoints<10){var A=re(f,a,i,s,o,d);return A.pdSuitLength>A.openingSuitLength?"P":v+1+f}if(!(n.totalPoints<12))return l>=5?"3"+c:"2T";if(l>=5&&["S","H"].includes(c)){if(c<f)return"2"+c;var S=re(f,a,i,s,o,d);return S.pdSuitLength>S.openingSuitLength?"P":v+1+f}}}return""}};function re(e,t,n,r,a,i){return{pdSuitLength:"S"===i?t:"H"===i?n:"D"===i?r:a,openingSuitLength:"S"===e?t:"H"===e?n:"D"===e?r:a}}var ae=function(){function e(t){var n=this;Object(b.a)(this,e),this.get2CBid=function(){return n.hcp>=21?"2C":""},this.getPreemptBid=function(){if(n.ltc>=9)return"";if(n.longestLength<6)return"";if(6===n.longestLength)return 6===n.spadeLength?"2S":6===n.heartLength?"2H":6===n.diamondLength?"2D":"P";if(n.longestLength>6){var e=n.spadeLength>6?"S":n.heartLength>6?"H":n.diamondLength>6?"D":"C",t=11-n.ltc;return t>4&&(t=4),t+e}return""},this.suitMap={0:"S",1:"H",2:"D",3:"C"},this.hand=t,this.hcp=0,this.ltc=0,this.shape="",this.distribution=[],this.evaluateHand();var r=this.getTwoLongest(),a=r.longestLength,i=r.longestSuit,s=r.secondLength,o=r.secondSuit;this.longestLength=a,this.longestSuit=i,this.secondLength=s,this.secondSuit=o,this.totalPoints=this.hcp,a>4&&t[i].match("A|K|Q")&&(this.totalPoints+=a-4),s>4&&t[o].match("A|K|Q")&&(this.totalPoints+=s-4),this.spadeLength=this.distribution[0],this.heartLength=this.distribution[1],this.diamondLength=this.distribution[2],this.clubLength=this.distribution[3]}return Object(j.a)(e,[{key:"print",value:function(){console.log(this.hand," ".concat(this.hcp," ").concat(this.totalPoints," Dist:").concat(this.distribution," LTC:").concat(this.ltc," Shape:").concat(this.shape))}},{key:"evaluateHand",value:function(){for(var e in this.hand){var t=this.hand[e];this.hcp+=t.search("A")>=0?4:0,this.hcp+=t.search("K")>=0?3:0,this.hcp+=t.search("Q")>=0?2:0,this.hcp+=t.search("J")>=0?1:0,this.distribution.push(t.length);var n=t.length>=3?t.replace("A","").replace("K","").replace("Q",""):2===t.length?t.replace("A","").replace("K",""):t.replace("A","");this.ltc+=Math.min(3,t.length)-(t.length-n.length)}var r=E.a.groupBy(this.distribution);this.shape=r[0]||r[1]?"U":r[2]&&r[2].length>1?"S":"B"}},{key:"goodToOvercall",value:function(e){var t=this.hand[e],n=0;return t.search("A")>=0&&n++,t.search("K")>=0&&n++,t.search("Q")>=0&&n++,t.search("J")>=0&&t.search("T")>=0&&n++,t.length>=5&&n>=2}},{key:"haveStopper",value:function(e){var t=this.hand[e];return t.search("A")>=0||(t.search("K")>=0&&t.length>=2||(3===t.length&&"Q"===t.charAt(0)&&("J"===t.charAt(1)||"T"===t.charAt(1))||t.length>=4))}},{key:"getTwoLongest",value:function(){var e=E.a.max(this.distribution),t=E.a.indexOf(this.distribution,e),n=this.suitMap[t],r=Object(B.a)(this.distribution);r[t]=0;var a=E.a.max(r),i=E.a.indexOf(r,a);return{longestLength:e,longestSuit:n,secondLength:a,secondSuit:this.suitMap[i]}}},{key:"getGoingBid",value:function(e){for(var t,n="",r=e.length-1;r>=0;r--)if("X"!==(t=e[r])||n||(n="X"),"XX"!==t||n||(n="XX"),t.match(/^\d/))return[r,t,n];return[-1,"",""]}},{key:"getBidderRoles",value:function(e){var t,n;if(0===e.length?t="Opener":1===e.length&&(t="P"===e[0]?"Opener":"Overcaller"),t)return[t,n];console.assert(e.length>1);var r=this.getBidderRoles(e.slice(0,e.length-2));return"Opener"===(n=Object(u.a)(r,1)[0])||"Overcaller"===n?t="P"===e[e.length-2]?"P"===e[e.length-1]?n:"Overcaller":"Opener"===n?"Responder":"Advancer":"Responder"===n||"Advancer"===n?t="OpenerRebid":"OpenerRebid"===n&&(t="ResponderRebid"),[t,n]}},{key:"getBiddingContext",value:function(e){var t=this.getGoingBid(e),n=Object(u.a)(t,3),r=n[0],a=n[1],i=n[2],s=a?this.getGoingBid(e.slice(0,r)):[-1,"",""],o=Object(u.a)(s,3),c=o[0],l={bidderRole:null,pdRole:null,oppSuits:null,goingBid:a,priorGoingBid:o[1],dblRdbl:i,priorDblRdbl:o[2]};console.assert(c>=-1);var h=this.getBidderRoles(e),d=Object(u.a)(h,2),g=d[0],p=d[1];return l.bidderRole=g,l.pdRole=p,l.oppSuits=this.getOppSuits(e),l}},{key:"getOppSuits",value:function(e){for(var t=new Set,n=e.length-1;n>=0;n-=2)e[n].match(/^\d/)&&t.add(e[n].charAt(1));return t}},{key:"getBid",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t="",n=this.getBiddingContext(e);return"Opener"===n.bidderRole&&(t=this.getOpeningBid()),"Overcaller"===n.bidderRole&&(t=this.getOvercall(e,n)),"Responder"!==n.bidderRole&&"Advancer"!==n.bidderRole||(t=this.getResponse(e,n)),"OpenerRebid"===n.bidderRole&&(t=this.getOpenerRebid(e,n)),"ResponderRebid"===n.bidderRole&&(t=this.getResponderRebid(e,n)),t}},{key:"getOpeningBid",value:function(){var e="";return(e=ee.getOpening(this))||(e=this.get2CBid()),e||(e=ne.getOpening(this)),e||(e=te.getOpening(this)),e||(e=this.getPreemptBid()),e||(e="P"),e}},{key:"getOvercall",value:function(e,t){var n="",r=t.goingBid.charAt(1),a=t.goingBid.charAt(0)-"0",i=t.pdRole;return i&&"Opener"===i&&"2C"===e[e.length-1]||i&&"Overcaller"===i&&"2C"===e[e.length-3]?"P":((n=ee.getOvercall(e,t,this))||(n=ne.getOvercall(e,t,this)),n||(n=this.getTODouble(e,t,a,r,t.oppSuits)),n||(n=this.getPreemptOvercall(a,t.oppSuitssuit,t.oppSuits)),n||(n="P"),n)}},{key:"getResponse",value:function(e,t){var n="",r=e[e.length-2],a=r.charAt(1),i=r.charAt(0)-"0";return"T"===a&&(n=ee.getResponse(e,t,this)),!n&&1===i&&["S","H"].includes(a)&&(n=ne.getResponse(e,t,this)),!n&&1===i&&["D","C"].includes(a)&&(n=te.getResponse(e,t,this)),n||(n=this.getResponseBid(e,t)),n}},{key:"getOpenerRebid",value:function(e,t){var n="",r=e[e.length-4].charAt(1);return"T"===r&&(n=ee.getOpenerRebid(e,t,this)),n||(n=ne.getOpenerRebid(e,t,this)),!n&&["D","C"].includes(r)&&(n=te.getOpenerRebid(e,t,this)),n}},{key:"getResponderRebid",value:function(e,t){var n="",r=e[e.length-6].charAt(1);return"T"===r&&(n=ee.getResponderRebid(e,t,this)),n||(n=ne.getResponderRebid(e,t,this)),!n&&["D","C"].includes(r)&&(n=te.getResponderRebid(e,t,this)),n}},{key:"getTODouble",value:function(e,t,n,r,a){if(this.hcp<12)return"";if(this.hcp>=18+2*(n-1))return"X";if("T"===r)return"1T"===ee.getOpening(e,t,this)&&n<=2?"X":"";var i=["S","H","D","C"];if(this.hand[r].length>=3)return"";for(var s in i)if(i[s]!==r&&this.hand[i[s]].length<3)return"";return"X"}},{key:"getPreemptOvercall",value:function(e,t,n){var r=this.getPreemptBid();return r&&!n.has(r.charAt(1))&&r>e+t?r:""}},{key:"getResponseBid",value:function(e,t){var n="",r=e[e.length-2];return"2C"===r&&(n=this.get2CResponse(e,t)),n||"2"===r.charAt(0)&&(n=this.getWeak2Response(e,t)),n}},{key:"get2CResponse",value:function(e,t){var n=e[e.length-1];if("P"===n)return this.hcp>=5&&this.longestLength>=5?"C"===this.longestSuit?"3C":"D"===this.longestSuit?"3D":"2"+this.longestSuit:"2D";if("X"===n)return this.hcp>=5&&this.longestLength>=5?"C"===this.longestSuit?"3C":"2"+this.longestSuit:this.hcp>=3?"XX":"P";var r="";return this.hcp>=5&&this.longestLength>=5&&(r="C"===this.longestSuit?"3C":"2"+this.longestSuit),r&&r>n?r:this.hcp>=3?"X":"P"}},{key:"getWeak2Response",value:function(e,t){var n=e[e.length-2].charAt(1),r=e[e.length-1],a="",i="S"===n?this.spadeLength:"H"===n?this.heartLength:this.diamondLength;return["S","H"].includes(n)&&this.totalPoints+i>=17&&(a="4"+n,["P","X"].includes(r)||a>r)?a:this.hcp>15&&this.longestLength>=5&&["S","H"].includes(this.longestSuit)?(a="2"+this.longestSuit,["P","X"].includes(r)||a>r?a:a===r?"X":(this.hcp>17&&this.longestLength>=6&&(a="3"+this.longestSuit),a>r?a:"X")):this.hcp>15&&"P"===r?"2T":"P"}}]),e}(),ie=function(e){var t=e.undoBid,n=e.saveDeal,r=e.nextDeal,i=e.doneDeal,s=e.practiceMode;return Object(m.jsx)(a.a.Fragment,{children:Object(m.jsxs)(a.a.Fragment,{children:[t&&Object(m.jsx)(_,{onUndoBid:t}),s?Object(m.jsxs)(a.a.Fragment,{children:[Object(m.jsx)(O.a,{variant:"success",size:"sm",onClick:r,children:"Next Deal"}),Object(m.jsx)(O.a,{variant:"warning",size:"sm",disabled:!R.getCurrentUser(),onClick:n,children:R.getCurrentUser()?"Save to Review":"Login to Save"})]}):Object(m.jsx)(O.a,{variant:"success",size:"sm",onClick:i,children:"Done"})]})})};function se(){return(se=Object(P.a)(S.a.mark((function e(t){var n,r,a,i;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=R.getCurrentUser()){e.next=4;break}return console.log("Not fetching deal. Need to login first"),e.abrupt("return");case 4:return e.prev=4,r=R.getJwt(),e.next=8,T.get(T.apiUrl()+"/games/api/deals/",{username:n},{headers:{Authorization:"JWT "+r}});case 8:a=e.sent,i=a.data,t(i),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(4),e.t0.response?console.log(e.t0.response):e.t0.request?console.log(e.t0.request):console.log(e.t0),console.log("Need to login again"),t(null);case 18:case"end":return e.stop()}}),e,null,[[4,13]])})))).apply(this,arguments)}var oe={saveDeal:function(){var e=Object(P.a)(S.a.mark((function e(t,n,r){var a,i,s,o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=R.getCurrentUser()){e.next=4;break}return console.log("Not saving deal. Need to login first"),e.abrupt("return");case 4:return e.prev=4,i=R.getJwt(),e.next=8,T.post(T.apiUrl()+"/games/api/deals/",{hands:t,auction:n,username:a},{headers:{Authorization:"JWT "+i}});case 8:s=e.sent,o=s.data,r(o),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(4),e.t0.response?console.log(e.t0.response):console.log(e.t0.request),console.log("Need to login again"),r(null);case 18:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t,n,r){return e.apply(this,arguments)}}(),getDeals:function(e){return se.apply(this,arguments)}},ce=function(e){var t=e.loginHandler,n=e.signupHandler,i=Object(r.useState)(),s=Object(u.a)(i,2),o=s[0],c=s[1],l=Object(r.useState)(),h=Object(u.a)(l,2),d=h[0],g=h[1],p=Object(r.useState)("login"),b=Object(u.a)(p,2),j=b[0],f=b[1],v=function(e){e.preventDefault(),R.login(o,d,t)},x=function(e){e.preventDefault(),R.signup(o,d,n)};return Object(m.jsx)(a.a.Fragment,{children:"login"===j?Object(m.jsx)("div",{children:Object(m.jsxs)("form",{onSubmit:function(e){return v(e)},children:[Object(m.jsx)("h4",{children:"Log In"}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{htmlFor:"username",children:"Username"}),Object(m.jsx)("input",{type:"text",className:"form-control",name:"username",onChange:function(e){return c(e.target.value)}})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{htmlFor:"password",children:"Password"}),Object(m.jsx)("input",{type:"password",className:"form-control",name:"password",autoComplete:"on",onChange:function(e){return g(e.target.value)}})]}),Object(m.jsx)(O.a,{type:"submit",className:"btn btn-primary btn-block",children:"Submit"}),Object(m.jsxs)("p",{className:"text-right",children:["New to Veed?"," ",Object(m.jsx)(O.a,{variant:"link",onClick:function(){return f("signup")},children:"Please Sign Up"})]})]})}):Object(m.jsx)("div",{children:Object(m.jsxs)("form",{onSubmit:function(e){return x(e)},children:[Object(m.jsx)("h4",{children:"Sign Up"}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{htmlFor:"username",children:"Username"}),Object(m.jsx)("input",{type:"text",className:"form-control",name:"username",onChange:function(e){return c(e.target.value)}})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{htmlFor:"password",children:"Password"}),Object(m.jsx)("input",{type:"password",className:"form-control",name:"password",autoComplete:"on",onChange:function(e){return g(e.target.value)}})]}),Object(m.jsx)(O.a,{type:"submit",className:"btn btn-primary btn-block",children:"Submit"}),Object(m.jsxs)("p",{className:"text-right",children:["Already signed up to Veed?",Object(m.jsx)(O.a,{variant:"link",onClick:function(){return f("login")},children:"Please Log In"})]})]})})})},le={0:"West",1:"North",2:"East",3:"South"},ue=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var r;return Object(b.a)(this,n),(r=t.call(this,e)).startDeal=function(){if(r.deal=new I,r.begin&&r.props.location.state){var e=r.props.location.state,t=e.hands,n=e.auction;r.deal.setHands(JSON.parse(t)),r.auction=JSON.parse(n)}r.agents=[];for(var a=0;a<4;a++)r.agents.push(new ae(r.deal.getHand(a)));r.dealer=r.deal.getDealer(),r.player=r.dealer,r.aiBid=r.agents[r.player].getBid(),r.setState({bids:[],needsLogin:!1})},r.doneDeal=function(){console.log("Redirect to Review page ",r.props),r.props.history.goBack()},r.nextDeal=function(){r.startDeal(),r.auction=null,r.begin=!1},r.saveDeal=function(){var e=JSON.stringify(r.deal.hands),t=JSON.stringify(r.state.bids);oe.saveDeal(e,t,(function(e){console.log("Deal saved:",e),e?r.nextDeal():(console.log("Deal not saved:"),r.setState({needsLogin:!0}),console.log("Redirected to login"))}))},r.loginHandler=function(){console.log("Logged in again"),r.setState({needsLogin:!1})},r.getGoingBid=function(){for(var e,t=Object(B.a)(r.state.bids);e=t.pop();)if(e.match(/^\d/))return e;return null},r.placeBid=function(e){var t=[].concat(Object(B.a)(r.state.bids),[e]);r.player=(r.dealer+t.length)%4,r.aiBid=r.agents[r.player].getBid(t),r.setState({bids:t})},r.undoBid=function(){console.log("Undoing last bid...");var e=Object(B.a)(r.state.bids);e.pop(),r.player=(r.dealer+e.length)%4,r.aiBid=r.agents[r.player].getBid(e),r.setState({bids:e})},r.biddingOver=function(){var e=Object(B.a)(r.state.bids);if(e.length>=4){var t=e.length;if("P"===e[t-1]&&"P"===e[t-2]&&"P"===e[t-3])return!0}return!1},r.getDoubleOption=function(){var e,t=Object(B.a)(r.state.bids),n=t.length;if(0===n)return e;var a=t[n-1];if("X"===a)e="XX";else if("P"!==a)e="X";else if(n>=3){var i=t[n-2],s=t[n-3];"P"===i&&("X"===s?e="XX":"P"!==s&&(e="X"))}return e},r.begin=!0,r.state={bids:[],needsLogin:!1},r}return Object(j.a)(n,[{key:"componentDidMount",value:function(){this.startDeal()}},{key:"render",value:function(){return this.state.needsLogin?Object(m.jsx)(ce,{loginHandler:this.loginHandler,signipHandler:this.loginHandler}):this.deal?this.showHands(this.player):null}},{key:"showOneHand",value:function(e,t){return this.biddingOver()||e===t?Object(m.jsx)(a.a.Fragment,{children:Object(m.jsx)(q,{cards:this.deal.getHand(t),name:le[t]})}):Object(m.jsx)(q,{name:le[t]})}},{key:"showHands",value:function(e){return Object(m.jsxs)(o.a,{fluid:!0,children:[Object(m.jsxs)(W.a,{children:[Object(m.jsx)(z.a,{children:this.auction&&Object(m.jsx)(V,{title:"Saved Auction",dealer:this.dealer,bids:this.auction,biddingOver:!0})}),Object(m.jsxs)(z.a,{children:[this.showOneHand(e,1)," "]}),Object(m.jsx)(z.a,{children:(this.auction||this.biddingOver())&&Object(m.jsx)(ie,{undoBid:this.state.bids&&this.state.bids.length>0&&this.undoBid,saveDeal:this.saveDeal,nextDeal:this.nextDeal,doneDeal:this.doneDeal,practiceMode:!this.auction})})]}),Object(m.jsxs)(W.a,{children:[Object(m.jsx)(z.a,{children:Object(m.jsxs)(z.a,{children:[this.showOneHand(e,0)," "]})}),Object(m.jsxs)(z.a,{children:[Object(m.jsx)(V,{dealer:this.dealer,bids:this.state.bids,aiBid:this.aiBid,biddingOver:this.biddingOver()}),!this.biddingOver()&&Object(m.jsx)(Z,{placeBid:this.placeBid,undoBid:this.undoBid,goingBid:this.getGoingBid(),allowUndo:this.state.bids.length>0,doubleOption:this.getDoubleOption(),aiBid:this.aiBid})]}),Object(m.jsx)(z.a,{children:Object(m.jsxs)(z.a,{children:[this.showOneHand(e,2)," "]})})]}),Object(m.jsxs)(W.a,{children:[Object(m.jsx)(z.a,{}),Object(m.jsx)(z.a,{children:Object(m.jsxs)(z.a,{children:[this.showOneHand(e,3)," "]})}),Object(m.jsx)(z.a,{})]})]})}}]),n}(r.Component),he=function(e){var t=e.logoutHandler;return Object(m.jsx)(a.a.Fragment,{children:Object(m.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),R.logout(t)}(e)},children:[Object(m.jsx)("h4",{children:"Log Out"}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{htmlFor:"username",children:"Username"}),Object(m.jsx)("input",{type:"text",readOnly:!0,className:"form-control",name:"username",value:R.getCurrentUser()})]}),Object(m.jsx)(O.a,{type:"submit",className:"btn btn-primary btn-block",children:"Submit"})]})})},de=n(77),ge=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(b.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).raiseSort=function(t){var n=Object(de.a)({},e.props.sortColumn);n.path===t?n.order="asc"===n.order?"desc":"asc":(n.path=t,n.order="asc"),e.props.onSort(n)},e.renderSortIcon=function(t){var n=e.props.sortColumn;return t.path!==n.path?null:"asc"===n.order?Object(m.jsx)("i",{className:"fa fa-sort-asc"}):Object(m.jsx)("i",{className:"fa fa-sort-desc"})},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this;return Object(m.jsx)("thead",{children:Object(m.jsx)("tr",{children:this.props.columns.map((function(t){return Object(m.jsxs)("th",{className:"clickable",onClick:function(){return e.raiseSort(t.path)},children:[t.label," ",e.renderSortIcon(t)]},t.path||t.key)}))})})}}]),n}(r.Component),pe=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(b.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).renderCell=function(e,t){return t.content?t.content(e):E.a.get(e,t.path)},e.createKey=function(e,t){return e.id+(t.path||t.key)},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.data,r=t.columns;return Object(m.jsx)("tbody",{children:n.map((function(t){return Object(m.jsx)("tr",{children:r.map((function(n){return Object(m.jsx)("td",{children:e.renderCell(t,n)},e.createKey(t,n))}))},t.id)}))})}}]),n}(r.Component),be=function(e){var t=e.columns,n=e.sortColumn,r=e.onSort,a=e.data;return Object(m.jsxs)("table",{className:"table",children:[Object(m.jsx)(ge,{columns:t,sortColumn:n,onSort:r}),Object(m.jsx)(pe,{columns:t,data:a})]})},je=function(e){var t=e.itemsCount,n=e.pageSize,r=e.currentPage,a=e.onPageChange,i=Math.ceil(t/n);if(1===i)return null;var s=E.a.range(1,i+1);return Object(m.jsx)("nav",{children:Object(m.jsx)("ul",{className:"pagination",children:s.map((function(e){return Object(m.jsx)("li",{className:e===r?"page-item active":"page-item",children:Object(m.jsx)("button",{className:"m-1 p-1 page-link",onClick:function(){return a(e)},children:e})},e)}))})})};function fe(e,t,n){var r=(t-1)*n;return E()(e).slice(r).take(n).value()}var ve=function(e){var t=e.items,n=e.textProperty,r=e.valueProperty,a=e.selectedItem,i=e.onItemSelect;return Object(m.jsx)("ul",{className:"list-group",children:t.map((function(e){return Object(m.jsx)("li",{onClick:function(){return i(e)},className:e===a?"p-1 list-group-item active":"p-1 list-group-item clickable",children:e[n]},e[r])}))})};ve.defaultProps={textProperty:"name",valueProperty:"id"};var Oe=ve,me=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(b.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={deals:[],users:[],currentPage:1,pageSize:4,selectedUser:null,sortColumn:{path:"saved_date",order:"desc"},begin:!0,needsLogin:!1},e.loginHandler=function(){console.log("Logged in again"),e.setState({needsLogin:!1})},e.handlePageChange=function(t){e.setState({currentPage:t})},e.handleUserSelect=function(t){e.setState({selectedUser:t,currentPage:1})},e.handleSort=function(t){e.setState({sortColumn:t})},e.getUniqueUsers=function(e){var t=["All users"];e&&e.forEach((function(e){t.push(E.a.get(e,"username"))}));var n=[];return Object(B.a)(new Set(t)).forEach((function(e,t){var r={id:t,name:e};n.push(r)})),n},e.columns=[{path:"id",label:"ID",content:function(e){return Object(m.jsx)(h.a,{to:{pathname:"/bridge",state:{hands:"".concat(e.hands),auction:"".concat(e.auction)}},children:e.id})}},{path:"hands",label:"Hands"},{path:"auction",label:"Auction"},{path:"username",label:"By"},{path:"saved_date",label:"At"}],e.getPagedData=function(){var t=e.state,n=t.pageSize,r=t.currentPage,a=t.sortColumn,i=t.selectedUser,s=t.deals,o=s;i&&0!==i.id&&(o=s.filter((function(e){return e.username===i.name})));var c=fe(E.a.orderBy(o,[a.path],[a.order]),r,n);return{totalCount:o.length,data:c}},e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e,t=this;this.state.begin&&oe.getDeals((function(n){if(e=n){var r=t.getUniqueUsers(e);t.setState({deals:e,users:r,selectedUser:r[0],begin:!1,needsLogin:!1})}else t.setState({needsLogin:!0})}))}},{key:"render",value:function(){if(this.state.needsLogin)return Object(m.jsx)(ce,{loginHandler:this.loginHandler,signipHandler:this.loginHandler});if(!this.state.deals)return Object(m.jsx)("p",{children:"There are no deals in the database."});var e=this.state,t=e.pageSize,n=e.currentPage,r=e.sortColumn,a=this.getPagedData(),i=a.totalCount,s=a.data;return Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-2",children:Object(m.jsx)(Oe,{items:this.state.users,selectedItem:this.state.selectedUser,onItemSelect:this.handleUserSelect})}),Object(m.jsxs)("div",{className:"col-10",children:[Object(m.jsx)(h.a,{to:"/bridge",className:"btn-sm btn-primary",children:"New Deal"})," Listing ".concat(i," saved deals"),Object(m.jsx)(be,{columns:this.columns,data:s,sortColumn:r,onSort:this.handleSort}),Object(m.jsx)(je,{itemsCount:i,pageSize:t,currentPage:n,onPageChange:this.handlePageChange})]})]})}}]),n}(r.Component),xe=function(e){var t="/bridge",n="/deals",i="/login",s="/logout",o="/ttt",l="/addition",b=function(){return!!R.getCurrentUser()},j=Object(r.useState)(b()),f=Object(u.a)(j,2),v=f[0],O=f[1],A=function(){console.log("Logged in, signed up, or logged out"),O(b()),e.history.goBack()};return Object(m.jsxs)(a.a.Fragment,{children:[Object(m.jsxs)(d.a,{bg:"light",expand:"lg",children:[Object(m.jsx)(d.a.Brand,{href:"#home",children:"Veed"}),Object(m.jsx)(d.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(m.jsx)(d.a.Collapse,{id:"basic-navbar-nav",children:Object(m.jsxs)(g.a,{className:"mr-auto",children:[Object(m.jsx)(g.a.Link,{as:h.a,to:"/",children:"Home"}),v?Object(m.jsx)(g.a.Link,{as:h.a,to:n,children:"Bridge"}):Object(m.jsx)(g.a.Link,{as:h.a,to:t,children:"Bridge"}),Object(m.jsxs)(p.a,{title:"Puzzles",id:"basic-nav-dropdown",children:[Object(m.jsx)(p.a.Item,{as:h.a,to:o,children:"TicTacToe"}),Object(m.jsx)(p.a.Item,{href:"#action/3.3",children:"15 Puzzle"}),Object(m.jsx)(p.a.Item,{as:h.a,to:l,children:"Addition"})]}),v?Object(m.jsx)(g.a.Link,{as:h.a,to:s,children:"Logout"}):Object(m.jsx)(g.a.Link,{as:h.a,to:i,children:"Login"})]})})]}),Object(m.jsxs)(c.d,{children:[Object(m.jsx)(c.b,{path:l,component:x}),Object(m.jsx)(c.b,{path:o,component:U}),Object(m.jsx)(c.b,{path:t,component:ue}),Object(m.jsx)(c.b,{path:n,component:me}),Object(m.jsx)(c.b,{path:i,render:function(){return Object(m.jsx)(ce,{loginHandler:A,signupHandler:A})}}),Object(m.jsx)(c.b,{path:s,render:function(){return Object(m.jsx)(he,{logoutHandler:A})}}),Object(m.jsx)(c.b,{exact:!0,path:"/",component:N})]})]})},Ae=function(e){return Object(m.jsx)(c.a,{children:Object(m.jsxs)(o.a,{children:[Object(m.jsx)(l.a,{}),Object(m.jsx)(c.b,{component:xe})]})})},Se=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,129)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),i(e),s(e)}))};s.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(Ae,{})}),document.getElementById("root")),Se()},82:function(e,t,n){}},[[116,1,2]]]);
//# sourceMappingURL=main.9f682de7.chunk.js.map